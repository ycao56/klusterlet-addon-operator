# Copyright Contributors to the Open Cluster Management project

overrides:
- reason: "Cert-manager and its subcharts only runs on master nodes."
  rule: "PodHasArchBasedNodeAffinity"
  severity: "ERROR"
- reason: "In ICP 3.2.0 and above, cert-manager is installed before the calico network is available and image manager requires cert-manager. In order for it to work, it must use the host network."
  rule: "NoHostNetwork"
  severity: "ERROR"
- reason: "ICP retags all of its charts to the version of ICP, so it's not technically going to be the version in dev."
  rule: "ChartNameVersionClassificationMatch"
  severity: "ERROR"
- reason: "Cert-manager uses the default service account on its namespace and doesn't need to create its own"
  rule: "ServiceAccountHasPullSecret"
  severity: "WARNING"
- reason: "Cert-manager and its subcharts uses the default service account on its namespace and doesn't need to create its own"
  rule: "ServiceAccountHasSANamespacePullSecret"
  severity: "ERROR"
- reason: "Having an application test will mess with the shared testing environment since we are a platform service."
  rule: "AppTestExists"
  severity: "ERROR"
- reason: "If the helm chart supports earlier versions than ICP 3.2, it is acceptable to leave qualification.levelName: ibm-cloud-pak so that older versions of ICP display the IBM Cloud Pak badge"
  message: "qualification.levelName will not be valid for future versions of ICP: 'ibm-cloud-pak'"
  severity: "WARNING"
- reason: "Host network must be enabled for cert-manager and its subchart components since cert-manager will be installed first during an ICP install (before calico network) and it requires the host network to function properly. The other PSP keys have been added"
  rule: "PodSecurityInPodSecurityContext"
  severity: "ERROR"
- reason: "According to this page (http://icp-content-playbook.rch.stglabs.ibm.com/designing-content/ilmt-licensing/), IBM Cloud Private is not on the list to include metering annotations"
  rule : "MeteringAnnotationsDefined"
  severity: "ERROR"
- reason: "All ICP platform services were instructed not to include the keyword Limited"
  rule: "ChartNameVersionClassificationMatch"
  message: "chart name, classification keywords, and version are incompatible: chart with the Commercial keyword and no Limited keyword must have a name ending in -prod"
  severity: "ERROR"
- reason: "All ICP platform services were instructed not to include the keyword Limited"
  rule: "ChartNameVersionClassificationMatch"
  message: "chart name, classification keywords, and version are incompatible: chart without name ending in -dev or -prod must have both the Commercial and Limited keywords"
  severity: "ERROR"
- reason: "These parameters are in conditional statements so if they're not defined, they won't be used"
  rule: "UsedParametersAreDefined"
  severity: "REVIEW"
- reason: "This doesn't have any value attached to it."
  rule: "NoSensitiveInfoInValues"
  message: ".* found 'global.imagePullSecrets'"
  severity: "REVIEW"
- reason: "This doesn't have any value attached to it."
  rule: "NoSensitiveInfoInValues"
  message: ".* found 'controller.global.imagePullSecrets'"
  severity: "REVIEW"
- reason: "This doesn't have any value attached to it."
  rule: "NoSensitiveInfoInValues"
  message: ".* found 'crd.global.imagePullSecrets'"
  severity: "REVIEW"
- reason: "This is not sensitive information, it's only what the pod can tolerate in an environment."
  rule: "NoSensitiveInfoInValues"
  message: ".* found '.*tolerations.*'"
  severity: "REVIEW"
- reason: "Breaking chart upgrade is not acceptable, using old labels."
  rule: "CheckForOldMetadataLabels"
  severity: "REVIEW"
- reason: "The service account for the cert-manager namespace created by ICP is named default"
  rule: "NoDefaultServiceAccountName"
  severity: "REVIEW"
- reason: "In 3.2.2 we still have to be able to upgrade from previous versions so changing to the new metadata labels will break that."
  rule: "RequiredMetadataLabelsDefined"
  severity: "ERROR"
- reason: "This service is not stateful and can come back up or be removed at any time without any disruption to the environment."
  rule: "PodDisruptionBudgetInReadme"
  severity: "WARNING"
- reason: "The link to translated licenses does not exists yet, will add the link to the license file when it is available."
  rule: "TranslatedLicenseLinkExists"
  severity: "ERROR"
- reason: "The pod using this image is spun up dynamically and when the service needs to be used."
  rule: "ManifestImagesAreUsed"
  message: "image \"icp-cert-manager-acmesolver.*\" is not used"
  severity: "REVIEW"
- reason: "A secret value will not be set and/or shipped for this"
  rule: "NoSensitiveInfoInValues"
  message: "potentially secret parameter global.imagePullSecrets might not be allowed"
  severity: "REVIEW"
- reason: "Not a secret parameter"
  rule: "NoSensitiveInfoInValues"
  message: "potentially secret parameter tolerations.* might not be allowed"
  severity: "REVIEW"
- reason: "The image names do contain 'icp' in them."
  rule: "NoICPReferences"
  severity: "REVIEW"
- reason: "No icon has been approved for this helm chart."
  rule: "StandardHelmLint"
  message: "icon is recommended"
  severity: "INFO"
- reason: "Unsure why SCH would be needed for this chart."
  rule: "ChartUsesSCH"
  severity: "INFO"
